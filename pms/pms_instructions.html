<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PMS Instructions, SOPs & Recovery</title>
<style>
  :root{--bg:#f7f7f9;--card:#fff;--ink:#0b1220;--muted:#6b7280;--border:#e5e7eb;--accent:#0f766e}
  body{margin:0;font:15.5px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
  .wrap{max-width:980px;margin:26px auto;padding:0 14px 40px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;margin:0 0 14px}
  h1{margin:0 0 6px} h2{margin:6px 0} h3{margin:10px 0 6px}
  .muted{color:var(--muted)} a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px} @media(max-width:900px){.grid{grid-template-columns:1fr}}
  ul{margin:8px 0 0 20px}
  code,kbd{background:#f3f5f7;border:1px solid var(--border);border-radius:6px;padding:0 6px}
  .pill{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:4px 10px;margin:0 6px 6px 0;background:#fff}
  .toc a{display:block;padding:6px 10px;border:1px solid var(--border);border-radius:10px;background:#fff;margin:6px 0}
  .tip{border-left:4px solid #22c55e;padding:8px;background:#f6fff9;border-radius:8px}
  .warn{border-left:4px solid #ef4444;padding:8px;background:#fff6f6;border-radius:8px}
</style>
</head>
<body>
    <!-- ==== Background: put this once per page ==== -->
    <style>
         .pms-bg {
             position: fixed;
             inset: 0;
             z-index: -2;
             background: center/cover no-repeat url("bg.png");
             /* Remove blur if you hate nice things */
             filter: saturate(105%) brightness(0.98);
         }

             .pms-bg::after {
                 content: "";
                 position: absolute;
                 inset: 0;
                 z-index: -1;
                 background: radial-gradient(1200px 700px at 50% -10%, rgba(0,0,0,.05), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,0) 40%, rgba(0,0,0,.10));
                 pointer-events: none;
             }
         /* If you need extra contrast for text-heavy pages, uncomment:
        body { background: rgba(255,255,255,.85); backdrop-filter: blur(2px); }
        */
    </style>
    <div class="pms-bg" aria-hidden="true"></div>

    <!-- ===== Minimal Navbar (centered + emoji) ===== -->
    <nav class="min-nav" role="navigation" aria-label="Primary">
        <a href="index.html" aria-label="Home"><span class="e" aria-hidden="true">üè†</span><span>Home</span></a>
        <a href="accommodation_slip.html" aria-label="Slip"><span class="e" aria-hidden="true">üìù</span><span>Slip</span></a>
        <a href="vacancy_forecast.html" aria-label="Forecast"><span class="e" aria-hidden="true">üìà</span><span>Forecast</span></a>
        <a href="building_legend_grid.html" aria-label="Legend Grid"><span class="e" aria-hidden="true">üß©</span><span>Legend Grid</span></a>
        <a href="checkins_checkouts.html" aria-label="Checkins and Checkouts"><span class="e" aria-hidden="true">üóìÔ∏è</span><span>Checkins/Checkouts</span></a>
        <a href="print_slip_a5.html" aria-label="Print"><span class="e" aria-hidden="true">üñ®Ô∏è</span><span>Print</span></a>
        <a href="slip_admin.html" aria-label="Admin"><span class="e" aria-hidden="true">üóÑÔ∏è</span><span>Admin</span></a>
        <a href="pms_instructions.html" aria-label="Instructions"><span class="e" aria-hidden="true">üìñ</span><span>Instructions</span></a>
    </nav>

    <style>
        .min-nav {
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center; /* centered */
            padding: 10px 12px;
            border-bottom: 1px solid #e5e7eb;
            background: rgba(255,255,255,.75);
            backdrop-filter: blur(6px);
        }

            .min-nav a {
                display: inline-flex;
                align-items: center;
                gap: 6px; /* emoji + text */
                color: #0b1220;
                text-decoration: none;
                padding: 6px 10px;
                border-radius: 10px;
            }

                .min-nav a:hover {
                    text-decoration: underline
                }

                .min-nav a[aria-current="page"] {
                    font-weight: 700;
                    background: #f3f4f6;
                }

            .min-nav .e {
                font-size: 1.05em;
                line-height: 1
            }
        /* emojis aligned nicely */

        @media (prefers-color-scheme: dark) {
            .min-nav {
                background: rgba(15,18,22,.6);
                border-color: #1f2937
            }

                .min-nav a {
                    color: #e5e7eb
                }

                    .min-nav a[aria-current="page"] {
                        background: #0f172a
                    }
        }
    </style>

    <script>
        (function () {
            var here = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
            document.querySelectorAll('.min-nav a').forEach(function (a) {
                if ((a.getAttribute('href') || '').toLowerCase() === here) {
                    a.setAttribute('aria-current', 'page');
                }
            });
        })();
    </script>
    <!-- ===== /Minimal Navbar ===== -->


    <div class="wrap">
        <h1>Instructions, Use Cases, and Recovery</h1>
        <p class="muted">This system runs fully in your browser using IndexedDB. No server. No ‚Äúcloud.‚Äù No excuses. <a href="seed.json" download="seed.json">Click here for sample data</a></p>

        <div class="card">
            <h2>Quick Start</h2>
            <div class="grid">
                <div>
                    <h3>Daily flow</h3>
                    <ol>
                        <li>Open <b>Home</b> (index.html) for KPIs and snapshot.</li>
                        <li>Create or edit slips in <a href="accommodation_slip.html">Accommodation Slip</a>.</li>
                        <li>Print guest copy with <a href="print_slip_a5.html">A5 2-up</a>.</li>
                        <li>Check rooms and capacity with <a href="vacancy_forecast.html">Forecast</a>.</li>
                        <li>Backup or clean up in <a href="slip_admin.html">Slip Admin</a>.</li>
                    </ol>
                </div>
                <div>
                    <h3>Core concepts</h3>
                    <ul>
                        <li><b>DB v2</b>: one object store <code>slips</code> with indexes on <code>createdAt</code>, <code>sh_no</code>, <code>building</code>.</li>
                        <li><b>Rooms & capacity</b>: most recent capacity per building|room is used across pages.</li>
                        <li><b>Occupancy</b>: a room is ‚Äúoccupied‚Äù if the time is within <code>[checkin, checkout)</code>.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Features by Page</h2>
            <div class="grid">
                <div>
                    <h3><a href="accommodation_slip.html">Accommodation Slip</a></h3>
                    <ul>
                        <li>Create and edit slips; supports infants and children.</li>
                        <li>Fetch capacity data for entered rooms from DB; unknown shows ‚Äúunassigned.‚Äù</li>
                        <li>Check availability for conflicts before save.</li>
                        <li>Fetch by SH No. to auto-fill latest details for that SH.</li>
                        <li>Buildings: Mohammedi, Mufaddal, Snood, Baha, Husn.</li>
                    </ul>
                </div>
                <div>
                    <h3><a href="print_slip_a5.html">Print Slip A5 (2-up)</a></h3>
                    <ul>
                        <li>Exact two-copy A5 landscape print, gents/ladies tables side-by-side.</li>
                        <li>Load by saved list or SH No.; choose number of room rows to show.</li>
                        <li>On-screen preview matches print output.</li>
                    </ul>
                </div>
                <div>
                    <h3><a href="vacancy_forecast.html">Vacancy Forecast</a></h3>
                    <ul>
                        <li>Pick date, time, and building; view occupied vs free rooms.</li>
                        <li>Infer inventory from DB or paste a manual list.</li>
                        <li>Shows known capacity totals and headcount mix now.</li>
                    </ul>
                </div>
                <div>
                    <h3><a href="slip_admin.html">Slip Admin</a></h3>
                    <ul>
                        <li>Search, filter, preview, and delete slips.</li>
                        <li>Export backup JSON; import JSON to restore or migrate.</li>
                        <li>Nuclear option: delete all slips after typing confirmation.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Do‚Äôs and Don‚Äôts</h2>
            <div class="grid">
                <div>
                    <h3>Do</h3>
                    <ul>
                        <li>Enter check-in and check-out times accurately. Occupancy math depends on it.</li>
                        <li>Run <b>Check room availability</b> before saving edits.</li>
                        <li>Seed capacity slips per building so forecast math isn‚Äôt guessing.</li>
                        <li>Export backups regularly: <kbd>Slip Admin ‚Üí Export JSON</kbd>.</li>
                    </ul>
                </div>
                <div>
                    <h3>Don‚Äôt</h3>
                    <ul>
                        <li>Don‚Äôt ‚ÄúClear site data‚Äù in the browser unless you‚Äôve exported a backup.</li>
                        <li>Don‚Äôt reuse rooms for overlapping windows. The checker will yell for a reason.</li>
                        <li>Don‚Äôt trust memory. If a count changed, update the slip and reprint.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Operational Safety & Good Practices</h2>
            <ul>
                <li><b>Backups:</b> keep at least two recent JSON backups on a shared drive or USB.</li>
                <li><b>Migrations:</b> to move data to another machine, export JSON then import on the new device.</li>
                <li><b>Capacity hygiene:</b> if a room‚Äôs capacity changes, add a tiny ‚Äúcapacity slip‚Äù for that building with updated values so the latest snapshot propagates.</li>
                <li><b>Versioning:</b> avoid editing very old slips just to change capacity. Use a fresh capacity slip instead.</li>
            </ul>
            <div class="tip">Tip: you can import a capacity JSON that contains one slip per building with all rooms and capacities to seed the system fast.</div>
        </div>

        <div class="card">
            <h2>Recovery Options</h2>
            <div class="grid">
                <div>
                    <h3>Lost the data?</h3>
                    <div class="warn">If IndexedDB is wiped, the only recovery is your exported JSON backups.</div>
                    <ol>
                        <li>Open <b>Slip Admin</b>.</li>
                        <li>Click <b>Import JSON</b> and choose your backup file.</li>
                        <li>Choose <b>Replace</b> to clear DB first, or <b>Add</b> to merge.</li>
                    </ol>
                </div>
                <div>
                    <h3>Moving to a new device</h3>
                    <ol>
                        <li>On the old device, <b>Export JSON</b> from <b>Slip Admin</b>.</li>
                        <li>Copy the file to the new device.</li>
                        <li>On the new device, open <b>Slip Admin</b> and <b>Import JSON</b>.</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Troubleshooting</h2>
            <ul>
                <li><b>‚ÄúCould not open local DB‚Äù</b>: your browser context is blocking IndexedDB. Try a standard profile, not private mode.</li>
                <li><b>Print doesn‚Äôt fit A5</b>: ensure printer respects page size and margins; system sets <code>@page size: A5 landscape</code>.</li>
                <li><b>Forecast shows unknown capacity</b>: seed capacity via capacity slips or use the slip editor‚Äôs ‚ÄúFetch capacity data.‚Äù</li>
                <li><b>Rooms flagged as occupied when editing</b>: availability checker found an overlap. Use the alert‚Äôs ‚Äúwill be empty at‚Äù time to choose a different room or adjust dates.</li>
            </ul>
        </div>

        <div class="card">
            <h2>Reference</h2>
            <div>
                <span class="pill">Home dashboard (this)</span>
                <a class="pill" href="accommodation_slip.html">Accommodation Slip</a>
                <a class="pill" href="print_slip_a5.html">Print Slip A5</a>
                <a class="pill" href="vacancy_forecast.html">Vacancy Forecast</a>
                <a class="pill" href="slip_admin.html">Slip Admin</a>
            </div>
            <p class="muted">These features align with your current module pages. Source pages referenced for consistency: accommodation slip, A5 print, admin, forecast.</p>
        </div>
    </div>
</body>
</html>
